@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import responsive design utilities */
@import './responsive.css';

/* Import mobile reading experience styles */
@import './mobile-reading.css';

/* Import accessibility styles */
@import './accessibility.css';

@layer base {
    [x-cloak] {
        display: none !important;
    }
    
    /* Smooth transitions for theme changes */
    * {
        @apply transition-colors duration-200 ease-in-out;
    }
    
    /* Disable transitions on page load to prevent flash */
    .preload * {
        transition: none !important;
    }
    
    /* Optimize image opacity in dark mode */
    .dark img:not(.no-dark-filter) {
        @apply opacity-90;
    }
    
    /* Ensure proper contrast for text in dark mode */
    .dark {
        color-scheme: dark;
    }
    
    /* Modern scrollbar styling */
    ::-webkit-scrollbar {
        @apply w-2 h-2;
    }
    
    ::-webkit-scrollbar-track {
        @apply bg-gray-100 dark:bg-gray-800;
    }
    
    ::-webkit-scrollbar-thumb {
        @apply bg-gray-300 dark:bg-gray-600 rounded-full;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-400 dark:bg-gray-500;
    }
    
    /* Animation delay utilities for voice search indicator */
    .animation-delay-75 {
        animation-delay: 75ms;
    }
    
    .animation-delay-150 {
        animation-delay: 150ms;
    }
    
    /* Focus styles for accessibility */
    :focus-visible {
        @apply outline-2 outline-offset-2 outline-primary-500;
    }
}

@layer components {
    /* Skeleton shimmer effect */
    .skeleton {
        @apply relative overflow-hidden bg-gray-200 dark:bg-gray-700;
    }
    .skeleton::after {
        content: '';
        position: absolute;
        inset: 0;
        transform: translateX(-100%);
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
        animation: shimmer 1.6s infinite;
    }
    @keyframes shimmer {
        100% {
            transform: translateX(100%);
        }
    }

    /* Fade-in for loaded content/images */
    .fade-in {
        opacity: 0;
        transition: opacity .35s ease-out;
    }
    .fade-in.is-visible {
        opacity: 1;
    }

    /* Integrate with lazy image states */
    img.lazy-image {
        opacity: .2;
        transition: opacity .35s ease-out, filter .3s ease-out;
    }
    img.lazy-loaded {
        opacity: 1;
    }
    /* Highlighted search match */
    .search-highlight, mark.search-highlight {
        @apply bg-yellow-200 px-1 rounded font-medium;
    }
    .dark .search-highlight, .dark mark.search-highlight {
        @apply bg-yellow-900 text-yellow-400;
    }
    /* Modern card hover effect */
    .card-hover {
        @apply transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
    }
    
    /* Gradient text */
    .gradient-text {
        @apply bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent;
    }
    
    /* Modern button styles */
    .btn-modern {
        @apply px-6 py-3 rounded-lg font-semibold transition-all duration-200 
               shadow-sm hover:shadow-md active:scale-95;
    }
    
    /* Glass morphism effect */
    .glass {
        @apply bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border border-gray-200/50 dark:border-gray-700/50;
    }
}

@media print {
    nav,
    footer,
    .no-print,
    [data-reading-progress="true"] {
        display: none !important;
    }

    article {
        box-shadow: none !important;
        border: none !important;
    }

    .prose {
        max-width: 100% !important;
    }
}
